if (self.CavalryLogger) { CavalryLogger.start_js(["\/9VZ5"]); }

__d("MessengerCommerceTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerCommerceLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerCommerceLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerCommerceLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAppOrPagePerm=function(a){this.$1.app_or_page_perm=a;return this};a.prototype.setAttachmentIds=function(a){this.$1.attachment_ids=a;return this};a.prototype.setBatchSize=function(a){this.$1.batch_size=a;return this};a.prototype.setBrandAppID=function(a){this.$1.brand_app_id=a;return this};a.prototype.setBroadcastID=function(a){this.$1.broadcast_id=a;return this};a.prototype.setCallSite=function(a){this.$1.call_site=a;return this};a.prototype.setCellNum=function(a){this.$1.cell_num=a;return this};a.prototype.setCtaExtraData=function(a){this.$1.cta_extra_data=a;return this};a.prototype.setCtaExtraStats=function(a){this.$1.cta_extra_stats=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setCtaID=function(a){this.$1.cta_id=a;return this};a.prototype.setCtaKind=function(a){this.$1.cta_kind=a;return this};a.prototype.setCtaKindStats=function(a){this.$1.cta_kind_stats=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setCtaTypeStats=function(a){this.$1.cta_type_stats=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setCustomLabelID=function(a){this.$1.custom_label_id=a;return this};a.prototype.setDebugData=function(a){this.$1.debug_data=a;return this};a.prototype.setEntityID=function(a){this.$1.entity_id=a;return this};a.prototype.setErrorType=function(a){this.$1.error_type=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setException=function(a){this.$1.exception=a;return this};a.prototype.setFirstSeqID=function(a){this.$1.first_seq_id=a;return this};a.prototype.setHasImplicitSubscriptionPerm=function(a){this.$1.has_implicit_subscription_perm=a;return this};a.prototype.setHasSubscriptionPerm=function(a){this.$1.has_subscription_perm=a;return this};a.prototype.setIsProd=function(a){this.$1.is_prod=a;return this};a.prototype.setIsTestPayment=function(a){this.$1.is_test_payment=a;return this};a.prototype.setLastSeqID=function(a){this.$1.last_seq_id=a;return this};a.prototype.setLatency=function(a){this.$1.latency=a;return this};a.prototype.setMessageBody=function(a){this.$1.message_body=a;return this};a.prototype.setMessageClassification=function(a){this.$1.message_classification=a;return this};a.prototype.setMessageFolder=function(a){this.$1.message_folder=a;return this};a.prototype.setMessageID=function(a){this.$1.message_id=a;return this};a.prototype.setMessageType=function(a){this.$1.message_type=a;return this};a.prototype.setNmorOrderType=function(a){this.$1.nmor_order_type=a;return this};a.prototype.setNumQuickReplies=function(a){this.$1.num_quick_replies=a;return this};a.prototype.setPageID=function(a){this.$1.page_id=a;return this};a.prototype.setPixelID=function(a){this.$1.pixel_id=a;return this};a.prototype.setPrometheusLag=function(a){this.$1.prometheus_lag=a;return this};a.prototype.setQuickReplyContentTypeStats=function(a){this.$1.quick_reply_content_type_stats=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setRating=function(a){this.$1.rating=a;return this};a.prototype.setRecipientID=function(a){this.$1.recipient_id=a;return this};a.prototype.setSenderID=function(a){this.$1.sender_id=a;return this};a.prototype.setSubscriptionID=function(a){this.$1.subscription_id=a;return this};a.prototype.setSyncToken=function(a){this.$1.sync_token=a;return this};a.prototype.setTargetSpecID=function(a){this.$1.target_spec_id=a;return this};a.prototype.setThreadID=function(a){this.$1.thread_id=a;return this};a.prototype.setTotalRatingSum=function(a){this.$1.total_rating_sum=a;return this};a.prototype.setTotalReviewCount=function(a){this.$1.total_review_count=a;return this};a.prototype.setUserFbid=function(a){this.$1.user_fbid=a;return this};a.prototype.setUserPhoneNumber=function(a){this.$1.user_phone_number=a;return this};a.prototype.setUserPsid=function(a){this.$1.user_psid=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.setWaterfallLogID=function(a){this.$1.waterfall_log_id=a;return this};a.prototype.setWebhookURL=function(a){this.$1.webhook_url=a;return this};a.prototype.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};var g={app_or_page_perm:!0,attachment_ids:!0,batch_size:!0,brand_app_id:!0,broadcast_id:!0,call_site:!0,cell_num:!0,cta_extra_data:!0,cta_extra_stats:!0,cta_id:!0,cta_kind:!0,cta_kind_stats:!0,cta_type_stats:!0,custom_label_id:!0,debug_data:!0,entity_id:!0,error_type:!0,event:!0,exception:!0,first_seq_id:!0,has_implicit_subscription_perm:!0,has_subscription_perm:!0,is_prod:!0,is_test_payment:!0,last_seq_id:!0,latency:!0,message_body:!0,message_classification:!0,message_folder:!0,message_id:!0,message_type:!0,nmor_order_type:!0,num_quick_replies:!0,page_id:!0,pixel_id:!0,prometheus_lag:!0,quick_reply_content_type_stats:!0,rating:!0,recipient_id:!0,sender_id:!0,subscription_id:!0,sync_token:!0,target_spec_id:!0,thread_id:!0,total_rating_sum:!0,total_review_count:!0,user_fbid:!0,user_phone_number:!0,user_psid:!0,vc:!0,waterfall_log_id:!0,webhook_url:!0};e.exports=a}),null);
__d("PageConnectConstants",[],(function(a,b,c,d,e,f){"use strict";a={CHANGE_VIEW:"change_view",INIT_FLOW:"init_flow",IS_INSTALLING:"is_installing",SET_APP_ROLE_OWNER:"set_app_role_owner",TOGGLE_SELECTED_PAGES:"toggle_selected_pages",TOGGLE_SELECTED_SCOPES:"toggle_selected_scopes",APP_INSTALL_SUCCESS:"app_install_success",APP_INSTALL_FAILURE:"app_install_failure"};e.exports={ActionTypes:a}}),null);
__d("PageConnectDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("ExplicitRegistrationReactDispatcher"));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=new a({strict:!0})}),null);
__d("PageConnectFlowStep",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({APP_ROLE_DETAILS:"app_role_details",GET_PERMISSIONS_NOTICE:"get_permissions_notice",SELECT_PAGES:"select_pages"})}),null);
__d("PageConnectSource",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({GRAPH_API_EXPLORER:"graph_api_explorer"})}),null);
__d("PageConnectDataStore",["FluxReduceStore","immutable","PageConnectConstants","PageConnectDispatcher","PageConnectFlowStep","PageConnectSource"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h,i=b("PageConnectConstants").ActionTypes;g=babelHelpers.inherits(j,b("immutable").Record({adminedPages:[],app:{},appRoles:[],appRolesToDesc:{},appRolesToPhrases:{},appRolesDetails:b("immutable").Map(),appRolesSelectedPage:null,firstName:null,flowStep:b("PageConnectFlowStep").GET_PERMISSIONS_NOTICE,isInstalling:!1,profilePicURL:null,redirectURI:null,scopes:[],scopesOptional:b("immutable").Map(),scopesToPhrases:{},selectedPages:b("immutable").Set(),source:null,viewerID:null}));g&&g.prototype;function j(){g.apply(this,arguments)}h=babelHelpers.inherits(a,b("FluxReduceStore"));h&&h.prototype;a.prototype.getInitialState=function(){return new j()};a.prototype.reduce=function(a,c){__p&&__p();switch(c.type){case i.CHANGE_VIEW:return a.set("flowStep",c.payload.step);case i.INIT_FLOW:var d=c.payload.source;a=a.set("source",d);a=a.set("adminedPages",c.payload.adminedPages);a=a.set("app",c.payload.app);a=a.set("appRoles",c.payload.appRoles);a=a.set("appRolesToDesc",c.payload.appRolesToDesc);a=a.set("appRolesToPhrases",c.payload.appRolesToPhrases);a=a.set("appRolesDetails",this.$PageConnectDataStore1(c.payload.appRolesDetails));a=a.set("firstName",c.payload.firstName);a=a.set("profilePicURL",c.payload.profilePicURL);a=a.set("redirectURI",c.payload.redirectURI);a=a.set("selectedPages",b("immutable").Set());a=a.set("scopes",c.payload.scopes);var e=c.payload.scopesOptional.map(function(a){return[a,d!==b("PageConnectSource").GRAPH_API_EXPLORER]});a=a.set("scopesOptional",b("immutable").Map(e));a=a.set("scopesToPhrases",c.payload.scopesToPhrases);return a.set("viewerID",c.payload.viewerID);case i.IS_INSTALLING:return a.set("isInstalling",!0);case i.SET_APP_ROLE_OWNER:e=a.appRolesDetails;var f=c.payload.pageID,g=c.payload.roles,h=c.payload.useNewApp,j=e;g.forEach(function(a){j=j.setIn([f,a,"should_grant_to_new_app"],h)});return a.set("appRolesDetails",j);case i.TOGGLE_SELECTED_PAGES:e=a.selectedPages;g=c.payload.pageIDs;c.payload.isSelected?e=e.union(g):e=e.subtract(g);return a.set("selectedPages",e);case i.TOGGLE_SELECTED_SCOPES:var k=a.scopesOptional;c.payload.scopes.forEach(function(a){k=k.set(a,c.payload.isSelected)});return a.set("scopesOptional",k);case i.APP_INSTALL_FAILURE:return a;default:return a}};a.prototype.$PageConnectDataStore1=function(a){return b("immutable").fromJS(a)};function a(){h.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("PageConnectDispatcher"))}),null);
__d("PageConnectFlowStepTemplate.react",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){return b("React").createElement("div",{className:"_4ey1"},this.$1(),this.$2(),this.$3())};a.prototype.$1=function(){return this.props.title===null?null:b("React").createElement("div",{className:"_4ey2"},this.props.title)};a.prototype.$2=function(){return b("React").createElement("div",{className:"_4ey6"},this.props.content)};a.prototype.$3=function(){return!this.props.footer?null:b("React").createElement("div",{className:"_r11"},this.props.footer)};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("GraphQLPageConnectInstallAppMutationCallWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1760770013962163"};c.getQueryID=function(){"use strict";return"1792342977735920"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("PageConnectUtils",["GraphQLPageConnectInstallAppMutationCallWebGraphQLMutation","MessengerCommerceTypedLogger","MessengerPlatformAppRoles","MNCommerceLoggerEvents","PageConnectConstants","PageConnectDataStore","PageConnectDispatcher","Popup","WebGraphQL","goURI","idx","promiseDone","URI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("PageConnectConstants").ActionTypes,h={installAppToPages:function(){__p&&__p();var a=b("PageConnectDataStore").getState(),c=a.app,d=a.appRolesDetails,e=a.redirectURI,f=a.scopes,i=a.scopesOptional,j=a.selectedPages;a=a.viewerID;if(!a||!c||!c.id||!e)return;i=i.filter(function(a){return a}).keySeq().toArray();f=f.concat(i);i=d.filter(function(a,b){return j.includes(b)});d={input:{client_mutation_id:"0",actor_id:a,app_id:c.id,messenger_app_roles_json:JSON.stringify(i),page_ids:j.toArray()||[],redirect_uri:e,scopes:f}};b("promiseDone")(b("WebGraphQL").exec(new(b("GraphQLPageConnectInstallAppMutationCallWebGraphQLMutation"))(d)),h.handleAppInstallResponse);b("PageConnectDispatcher").dispatch({type:g.IS_INSTALLING})},handleAppInstallResponse:function(a){a=(a=a)!=null?(a=a.page_connect)!=null?a.complete_redirect_uri:a:a;a?b("goURI")(a):b("PageConnectDispatcher").dispatch({type:g.APP_INSTALL_FAILURE})},logStep:function(a,c,d){new(b("MessengerCommerceTypedLogger"))().setBrandAppID(c).setUserFbid(a).setEvent(b("MNCommerceLoggerEvents").PAGE_CONNECT_STEP).setDebugData(JSON.stringify({step:d})).log()},getAppRoleDetails:function(a,c){var d=b("PageConnectDataStore").getState().appRolesDetails;return d.getIn([a,c])},hasAppRoleConflicts:function(){return this.getPagesWithAppRoleConflicts().length>0},hasAppRoleConflictForPageAndRole:function(a,c){a=this.getAppRoleDetails(a,c);c=b("PageConnectDataStore").getState().app.id;var d=a.get("original_owner_app_id");return a.get("is_exclusive_role")&&d!==null&&d.toString()!==c.toString()},getAppRoleConflictsForPage:function(a){var c=b("PageConnectDataStore").getState().appRoles;return c.filter(function(b){return this.hasAppRoleConflictForPageAndRole(a,b)}.bind(this))},getPagesWithAppRoleConflicts:function(){var a=b("PageConnectDataStore").getState().selectedPages;return a.filter(function(a){return this.getAppRoleConflictsForPage(a).length>0}.bind(this)).toArray()},hasOverriddenAppRolesForPage:function(a){var b=this.getAppRoleConflictsForPage(a);b=b.map(function(b){return this.getAppRoleDetails(a,b)}.bind(this));return b.some(function(a){return a.get("should_grant_to_new_app")})},batchSetAppRoles:function(a,b){var c=this.getAppRoleConflictsForPage(a);this.setAppRoleOwner(a,c,b)},setAppRoleOwner:function(a,c,d){b("PageConnectDispatcher").dispatch({type:g.SET_APP_ROLE_OWNER,payload:{pageID:a,roles:c,useNewApp:d}}),c.indexOf(b("MessengerPlatformAppRoles").PRIMARY_RECEIVER)!==-1&&b("PageConnectDataStore").getState().appRoles.indexOf(b("MessengerPlatformAppRoles").SECONDARY_RECEIVER)!==-1&&b("PageConnectDispatcher").dispatch({type:g.SET_APP_ROLE_OWNER,payload:{pageID:a,roles:[b("MessengerPlatformAppRoles").SECONDARY_RECEIVER],useNewApp:!d}})},openPageConnectDialog:function(a){a=b("URI").getRequestURI().setSubdomain("www").setPath("/dialog/oauth_page_connect").setQueryData(a).toString();b("Popup").open(a,800,800)}};e.exports=h}),null);
__d("PageConnectFlowAppRoleDetailsStep.react",["cx","fbt","ix","Image.react","LeftRight.react","Link.react","List.react","PageConnectConstants","PageConnectDispatcher","PageConnectFlowStep","PageConnectFlowStepTemplate.react","PageConnectUtils","React","SUIBusinessTheme","SUIButton.react","SUISpinner.react","XUISingleSelector.react","XUIText.react","suiMargin"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=b("XUISingleSelector.react").Option,m=b("PageConnectConstants").ActionTypes;j=babelHelpers.inherits(a,b("React").Component);j&&j.prototype;a.prototype.componentDidMount=function(){b("PageConnectUtils").logStep(this.props.viewerID,this.props.app.id,b("PageConnectFlowStep").APP_ROLE_DETAILS)};a.prototype.render=function(){var a=h._("Messenger App Settings (Advanced)");return b("React").createElement(b("PageConnectFlowStepTemplate.react"),{content:this.$1(),footer:this.$2(),title:a})};a.prototype.$1=function(){var a=h._("Some settings can only be applied to one app at a time. You can set your preferences here or later in Page settings.");return b("React").createElement("div",{className:"_1idi"},b("React").createElement("div",{className:"_3-8x"},b("React").createElement(b("Image.react"),{className:"_r13 _sqt _36px",height:64,src:this.props.app.profilePicURL,width:64}),b("React").createElement(b("Image.react"),{className:"_r13 _sqt",src:i("519574")})),b("React").createElement("div",{className:"_36py _36q0"},a),b("React").createElement("div",{className:"_36py"},b("PageConnectUtils").getPagesWithAppRoleConflicts().map(function(a){return this.$3(a)}.bind(this))))};a.prototype.$3=function(a){var c=b("PageConnectUtils").getAppRoleConflictsForPage(a),d=this.props.adminedPages.find(function(b){return b.id===a});if(!d)return null;var e=d.profile_pic_url?b("React").createElement(b("Image.react"),{className:"_r13 _sqs _sqt",height:25,src:d.profile_pic_url,width:25}):null,f=this.$4(a);return b("React").createElement("div",{className:"_sqn"},b("React").createElement(b("LeftRight.react"),{className:"_107h"},b("React").createElement("div",null,e,b("React").createElement(b("XUIText.react"),{className:"_3-9a _sqs _sqt",size:"header4",weight:"bold"},d.name)),b("React").createElement("div",null,f)),b("React").createElement(b("List.react"),{spacing:"large",className:"_36q1"},c.map(function(c){return b("React").createElement(n,{app:this.props.app,appRole:c,appRoleDesc:this.props.appRolesToDesc[c],appRoleDetails:b("PageConnectUtils").getAppRoleDetails(a,c),key:c+d.id,pageID:a})}.bind(this))))};a.prototype.$2=function(){var a=h._("Back"),c=h._("Connect"),d=this.props.isInstalling?b("React").createElement(b("SUISpinner.react"),{background:"light",margin:"_3-99",size:"large",theme:b("SUIBusinessTheme")}):null;return b("React").createElement(b("LeftRight.react"),null,b("React").createElement("div",null),b("React").createElement("div",null,b("React").createElement(b("SUIButton.react"),{label:a,theme:b("SUIBusinessTheme"),use:"default",onClick:this.$5}),b("React").createElement(b("SUIButton.react"),{label:c,style:{marginLeft:"4px"},onClick:b("PageConnectUtils").installAppToPages,theme:b("SUIBusinessTheme"),use:"confirm"}),d))};a.prototype.$4=function(a){var c=b("PageConnectUtils").hasOverriddenAppRolesForPage(a);c=c?h._("Reset"):h._("Assign all to {app name}",[h._param("app name",this.props.app.name)]);return b("React").createElement(b("Link.react"),{onClick:this.$6.bind(this,a)},c)};a.prototype.$5=function(){b("PageConnectDispatcher").dispatch({type:m.CHANGE_VIEW,payload:{step:b("PageConnectFlowStep").SELECT_PAGES}})};a.prototype.$6=function(a){var c=b("PageConnectUtils").hasOverriddenAppRolesForPage(a);b("PageConnectUtils").batchSetAppRoles(a,!c)};function a(){j.apply(this,arguments)}c=babelHelpers.inherits(n,b("React").Component);k=c&&c.prototype;function n(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=k.constructor).call.apply(a,[this].concat(e)),this.$2=function(a){a=a.value===this.props.app.id;b("PageConnectUtils").setAppRoleOwner(this.props.pageID,[this.props.appRole],a)}.bind(this),c}n.prototype.render=function(){return b("React").createElement("li",null,b("React").createElement(b("LeftRight.react"),null,b("React").createElement("div",{className:"_sqt _67z1"},this.props.appRoleDesc),this.$1()))};n.prototype.$1=function(){var a=this.props.appRoleDetails.get("should_grant_to_new_app")?this.props.app.id:this.props.appRoleDetails.get("original_owner_app_id");return b("React").createElement(b("XUISingleSelector.react"),{value:a,onChange:this.$2,className:"_sqt"},b("React").createElement(l,{value:this.props.app.id},this.props.app.name),b("React").createElement(l,{value:this.props.appRoleDetails.get("original_owner_app_id")},this.props.appRoleDetails.get("original_owner_app_name")))};e.exports=a}),null);
__d("PageConnectListRow.react",["cx","fbt","Image.react","FBCheckbox.react","LeftRight.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){var a=this.props.picURL?b("React").createElement(b("Image.react"),{className:"_r13",height:40,src:this.props.picURL,width:40}):null,c=this.props.isOptional?null:h._("Required");return b("React").createElement("li",null,b("React").createElement(b("LeftRight.react"),{className:"_3uid"},b("React").createElement("div",null,b("React").createElement(b("FBCheckbox.react"),{className:"_sqs _sqt",checked:this.props.isChecked,disabled:!this.props.isOptional,onToggle:this.props.onToggle}),b("React").createElement("div",{className:"_3-9c _sqt"},a),b("React").createElement("div",{className:"_3-9c _sqt _67z1"},this.props.label)),b("React").createElement("div",{className:"_w8d"},c)))};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("PageConnectFlowGetPermissionsNotice.react",["cx","fbt","ix","Image.react","LeftRight.react","Link.react","List.react","PageConnectConstants","PageConnectDispatcher","PageConnectFlowStep","PageConnectFlowStepTemplate.react","PageConnectListRow.react","PageConnectUtils","React","SUIBusinessTheme","SUIButton.react","emptyFunction"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("PageConnectConstants").ActionTypes;j=babelHelpers.inherits(a,b("React").Component);j&&j.prototype;a.prototype.componentDidMount=function(){b("PageConnectUtils").logStep(this.props.viewerID,this.props.app.id,b("PageConnectFlowStep").GET_PERMISSIONS_NOTICE)};a.prototype.render=function(){return b("React").createElement(b("PageConnectFlowStepTemplate.react"),{content:this.$1(),footer:this.$2(),title:null})};a.prototype.$1=function(){return b("React").createElement("div",{className:"_1idi _4gao"},b("React").createElement("div",{className:"_3-8x"},b("React").createElement(b("Image.react"),{className:"_r13 _sqt _36px",height:64,src:this.props.app.profilePicURL,width:64}),b("React").createElement(b("Image.react"),{className:"_r13 _sqt",src:i("519576")})),b("React").createElement("div",{className:"_36py _36q0"},this.$3()),b("React").createElement("div",{className:"_36py"},this.$4()),b("React").createElement("div",{className:"_36py _w8d"},this.$5()))};a.prototype.$4=function(){var a=this.props.scopesOptional.keySeq().toArray();return b("React").createElement("div",{className:"_2odh _12f4"},b("React").createElement(b("List.react"),{spacing:"large",border:"light"},this.props.scopes.map(function(a){return b("React").createElement(b("PageConnectListRow.react"),{key:a,isChecked:!0,isOptional:!1,label:this.props.scopesToPhrases[a],onToggle:b("emptyFunction")})}.bind(this)),a.map(function(a){return b("React").createElement(b("PageConnectListRow.react"),{key:a,isChecked:this.props.scopesOptional.get(a),isOptional:!0,label:this.props.scopesToPhrases[a],onToggle:function(c){b("PageConnectDispatcher").dispatch({type:k.TOGGLE_SELECTED_SCOPES,payload:{scopes:[a],isSelected:c}})}})}.bind(this))))};a.prototype.$5=function(){return h._("Any changes you make will replace the current settings and any other Page Admins will be notified.")};a.prototype.$3=function(){return b("React").createElement("div",null,h._("{name} would like to connect to your Pages and is requesting the following Page permissions:",[h._param("name",b("React").createElement("strong",null,this.props.app.name))]))};a.prototype.$6=function(){return b("React").createElement("div",null,b("React").createElement(b("Link.react"),{className:"_sqt _w8b",href:this.props.app.tosURL,target:"_blank"},h._("App Terms")),b("React").createElement(b("Link.react"),{className:"_sqt _3-9a _w8b",href:this.props.app.privacyURL,target:"_blank"},h._("Privacy Policy")))};a.prototype.$2=function(){var a=h._("Choose Pages"),c=this.props.scopes.concat(this.props.scopesOptional.filter(function(a,b){return a}).keySeq().toArray()).length===0;return b("React").createElement(b("LeftRight.react"),null,b("React").createElement("div",{className:"_sqt"},this.$6()),b("React").createElement("div",{className:"_sqt"},b("React").createElement(b("SUIButton.react"),{disabled:c,label:a,theme:b("SUIBusinessTheme"),use:"confirm",onClick:this.$7})))};a.prototype.$7=function(){b("PageConnectDispatcher").dispatch({type:k.CHANGE_VIEW,payload:{step:b("PageConnectFlowStep").SELECT_PAGES}})};function a(){j.apply(this,arguments)}e.exports=a}),null);
__d("PageConnectFlowSelectPagesStep.react",["cx","fbt","PageConnectConstants","LeftRight.react","Link.react","List.react","PageConnectDataStore","PageConnectDispatcher","PageConnectFlowStep","PageConnectFlowStepTemplate.react","PageConnectListRow.react","PageConnectUtils","React","SUIBusinessTheme","SUIButton.react","SUISpinner.react","suiMargin"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("PageConnectConstants").ActionTypes;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$7=function(){this.props.appRoles.length===0||!b("PageConnectUtils").hasAppRoleConflicts()?b("PageConnectUtils").installAppToPages():b("PageConnectDispatcher").dispatch({type:j.CHANGE_VIEW,payload:{step:b("PageConnectFlowStep").APP_ROLE_DETAILS}})}.bind(this),c}a.prototype.componentDidMount=function(){b("PageConnectUtils").logStep(this.props.viewerID,this.props.app.id,b("PageConnectFlowStep").SELECT_PAGES)};a.prototype.render=function(){var a=h._("Choose Pages to Connect");return b("React").createElement(b("PageConnectFlowStepTemplate.react"),{content:this.$1(),footer:this.$2(),title:a})};a.prototype.$1=function(){var a=this.$3();return b("React").createElement("div",{className:"_2p-p"},a)};a.prototype.$3=function(){var a=this.props.adminedPages.map(function(a){return b("React").createElement(b("PageConnectListRow.react"),{key:a.id,isChecked:this.props.selectedPages.includes(a.id),isOptional:!0,label:a.name,picURL:a.profile_pic_url,onToggle:function(c){b("PageConnectDispatcher").dispatch({type:j.TOGGLE_SELECTED_PAGES,payload:{pageIDs:[a.id],isSelected:c}})}})}.bind(this)),c=b("React").createElement(b("Link.react"),{onClick:this.$4},h._("Select all")),d=b("React").createElement(b("Link.react"),{onClick:this.$5},h._("Unselect all"));d=this.props.adminedPages.length===this.props.selectedPages.size?d:c;return b("React").createElement("div",{className:"_3-8x"},d,b("React").createElement("div",{className:"_3-8z"},b("React").createElement(b("List.react"),{border:"light",spacing:"small"},a)))};a.prototype.$2=function(){var a=h._("Back"),c=h._("Continue"),d=this.props.selectedPages.isEmpty(),e=this.props.isInstalling?b("React").createElement(b("SUISpinner.react"),{background:"light",margin:"_3-99",size:"large",theme:b("SUIBusinessTheme")}):null;return b("React").createElement(b("LeftRight.react"),null,b("React").createElement("div",null),b("React").createElement("div",null,b("React").createElement(b("SUIButton.react"),{label:a,theme:b("SUIBusinessTheme"),use:"default",onClick:this.$6}),b("React").createElement(b("SUIButton.react"),{disabled:d,label:c,style:{marginLeft:"4px"},theme:b("SUIBusinessTheme"),use:"confirm",onClick:this.$7}),e))};a.prototype.$6=function(){b("PageConnectDispatcher").dispatch({type:j.CHANGE_VIEW,payload:{step:b("PageConnectFlowStep").GET_PERMISSIONS_NOTICE}})};a.prototype.$4=function(){var a=b("PageConnectDataStore").getState().adminedPages.map(function(a){return a.id});b("PageConnectDispatcher").dispatch({type:j.TOGGLE_SELECTED_PAGES,payload:{pageIDs:a,isSelected:!0}})};a.prototype.$5=function(){var a=b("PageConnectDataStore").getState().adminedPages.map(function(a){return a.id});b("PageConnectDispatcher").dispatch({type:j.TOGGLE_SELECTED_PAGES,payload:{pageIDs:a,isSelected:!1}})};e.exports=a}),null);
__d("PageConnectFlowRenderMap",["PageConnectFlowAppRoleDetailsStep.react","PageConnectFlowGetPermissionsNotice.react","PageConnectFlowSelectPagesStep.react","PageConnectFlowStep"],(function(a,b,c,d,e,f){"use strict";var g=new Map([[b("PageConnectFlowStep").GET_PERMISSIONS_NOTICE,b("PageConnectFlowGetPermissionsNotice.react")],[b("PageConnectFlowStep").SELECT_PAGES,b("PageConnectFlowSelectPagesStep.react")],[b("PageConnectFlowStep").APP_ROLE_DETAILS,b("PageConnectFlowAppRoleDetailsStep.react")]]);a={getComponentForStep:function(a){return g.get(a)}};e.exports=a}),null);
__d("PageConnectFlowContainer.react",["FluxContainer","FluxStore","immutable","PageConnectConstants","PageConnectDataStore","PageConnectDispatcher","PageConnectFlowRenderMap","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("PageConnectConstants").ActionTypes;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.getStores=function(a){return[b("PageConnectDataStore")]};a.calculateState=function(a,c){a=b("PageConnectDataStore").getState();return babelHelpers["extends"]({},a.toObject())};a.prototype.UNSAFE_componentWillMount=function(){b("PageConnectDispatcher").explicitlyRegisterStores([b("PageConnectDataStore")]),b("PageConnectDispatcher").dispatch({type:h.INIT_FLOW,payload:{adminedPages:this.props.adminedPages,app:this.props.app,appRoles:this.props.appRoles,appRolesToDesc:this.props.appRolesToDesc,appRolesToPhrases:this.props.appRolesToPhrases,appRolesDetails:this.props.appRolesDetails,firstName:this.props.firstName,profilePicURL:this.props.profilePicURL,redirectURI:this.props.redirectURI,scopes:this.props.scopes,scopesOptional:this.props.scopesOptional,scopesToPhrases:this.props.scopesToPhrases,source:this.props.source,viewerID:this.props.viewerID}})};a.prototype.render=function(){var a=b("PageConnectFlowRenderMap").getComponentForStep(this.state.flowStep);return!a?null:b("React").createElement(a,this.state)};function a(){g.apply(this,arguments)}e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("XVerifyCreditCardLastDigitsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/payments/last_digits/verify/",{})}),null);
__d("CreditCardLastDigitsPlugin.react",["cx","fbt","AsyncRequest","CreditCardLastDigitsPluginConfig","MNCommerceLoggerEvents","MessengerCommerceTypedLogger","React","XVerifyCreditCardLastDigitsController"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=5,k=5;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={disabled:!1,focused:!0,retries:0,showAlert:!1,value:"",verified:null},this.$9=function(){this.setState({focused:!1})}.bind(this),this.$10=function(){this.setState({focused:!0})}.bind(this),this.$11=function(event){__p&&__p();if(this.state.retries>=j){this.setState({disabled:!0,showAlert:!0});this.$13({errorCode:"ERR1014",errorMessage:"Max amount of tries reached"});return}var a=event.target&&event.target.value;a=a.split("").filter(function(a){return!Number.isNaN(parseInt(a,10))}).join("").slice(0,k);if(a.length<k)this.setState({disabled:!1,showAlert:!1,verified:null});else if(a!==this.state.value){this.setState({disabled:!0,retries:this.state.retries+1});this.textInput.blur();var c=b("XVerifyCreditCardLastDigitsController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setMethod("POST").setData({account_linking_token:this.$7,first_ten_encrypted:this.$3,iv:this.$4,last_five:a,last_five_hmac:this.$5,iv_hmac:this.$6}).setFinallyHandler(this.$14).send()}this.setState({value:a})}.bind(this),this.$12=function(event){var a=event.target&&event.target.value;a=a.split("").filter(function(a){return!Number.isNaN(parseInt(a,10))}).join("");this.setState({value:a})}.bind(this),this.$14=function(a){a=a&&a.payload;if(a){var c=a.status==="success";this.setState({disabled:c?!0:this.state.retries>=j,showAlert:!c,verified:c});this.$13(a);new(b("MessengerCommerceTypedLogger"))().setEvent(b("MNCommerceLoggerEvents").LAST_DIGITS_PLUGIN_VERIFICATION_RESULT).setDebugData(JSON.stringify({result:c?"success":a})).log()}else this.setState({disabled:this.state.retries>=j});this.state.disabled||this.textInput.focus()}.bind(this),this.$8=function(event){__p&&__p();var a=event.origin||event.originalEvent.origin,c=b("CreditCardLastDigitsPluginConfig").whitelisted_domains;if(c[a]){if(event.source!==window){this.$1=event.source;this.$2=a;try{c=JSON.parse(event.data);this.$3=c.firstTen;this.$4=c.iv1;this.$5=c.lastFive;this.$6=c.iv2;this.$7=c.accountLinkingToken;new(b("MessengerCommerceTypedLogger"))().setEvent(b("MNCommerceLoggerEvents").LAST_DIGITS_PLUGIN_MESSAGE_RECEIVED).setDebugData(JSON.stringify({origin:a})).log()}catch(c){this.$13({errorCode:"ERR1000",errorMessage:"Retry request, Invalid parameters"}),new(b("MessengerCommerceTypedLogger"))().setEvent(b("MNCommerceLoggerEvents").LAST_DIGITS_PLUGIN_ERROR_PARSING_MESSAGE).setDebugData(JSON.stringify({origin:a})).log()}}}else new(b("MessengerCommerceTypedLogger"))().setEvent(b("MNCommerceLoggerEvents").LAST_DIGITS_PLUGIN_ERROR_UNAUTHORIZED_DOMAIN).setDebugData(JSON.stringify({origin:a})).log()}.bind(this),c}a.prototype.UNSAFE_componentWillMount=function(){window.addEventListener?window.addEventListener("message",this.$8,!1):window.attachEvent&&window.attachEvent("onmessage",this.$8,!1)};a.prototype.componentWillUnmount=function(){window.removeEventListener?window.removeEventListener("message",this.$8,!1):window.detachEvent&&window.detachEvent("onmessage",this.$8,!1)};a.prototype.render=function(){var a="_58_3"+(this.state.focused?" focused":"")+(this.state.showAlert?" alert":"")+(this.state.verified===!0?" valid":"")+(this.state.verified===!1?" invalid":""),c=h._("Provide the last 5 digits of your Card directly to Facebook.");return b("React").createElement("div",null,b("React").createElement("p",null,c),b("React").createElement("input",{autoComplete:"off",autoFocus:!0,className:a,disabled:this.state.disabled,inputMode:"numeric",maxLength:k,onBlur:this.$9,onFocus:this.$10,onInput:this.$11,onKeyDown:this.$12,pattern:"[0-9]*",placeholder:"Enter Last 5 Digits",ref:function(a){return this.textInput=a}.bind(this),type:"number",value:this.state.value}))};a.prototype.$13=function(a){this.$1&&this.$2&&(this.$1.postMessage(JSON.stringify(a),this.$2),new(b("MessengerCommerceTypedLogger"))().setEvent(b("MNCommerceLoggerEvents").LAST_DIGITS_PLUGIN_MESSAGE_POSTED).setDebugData(JSON.stringify({origin:this.$2})).log())};e.exports=a}),null);